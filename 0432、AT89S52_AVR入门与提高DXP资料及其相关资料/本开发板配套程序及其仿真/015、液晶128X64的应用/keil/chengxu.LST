C51 COMPILER V8.05a   CHENGXU                                                              04/17/2010 20:48:12 PAGE 1   


C51 COMPILER V8.05a, COMPILATION OF MODULE CHENGXU
OBJECT MODULE PLACED IN chengxu.OBJ
COMPILER INVOKED BY: C:\Keil\C51\BIN\C51.EXE chengxu.c BROWSE DEBUG OBJECTEXTEND

line level    source

   1          /********************************************************************
   2                                      汇诚科技
   3                                                    http://www.ourhc.cn
   4          *********************************************************************/
   5          #include <reg52.h>
   6          #include <intrins.h> 
   7          /*定义管脚*/ 
   8          sbit RS = P1^0; 
   9          sbit RW = P1^1; 
  10          sbit E = P1^2; 
  11          //sbit RES = P1^3; 
  12          //sbit PSB = P1^5;
  13          #define Lcd_Bus P0        //MCU P2<------> LCM 
  14          #define FIRST_ADDR 0       //定义字符/汉字显示起始位置 
  15          
  16          unsigned char code zk[]={ 
  17          0x08,0x20,0x1c,0x10,0x1c,0x1c,0xff,0x9e,0x7f,0x1e,0x1c,0x1f,0x3e,0x1f,0x3e,0x1f, 
  18          0x77,0x1f,0x41,0x3f,0x00,0x7e,0x00,0xfe,0x83,0xfc,0x7f,0xf8,0x3f,0xf0,0x0f,0xc0, 
  19          }; 
  20          
  21          unsigned char code BMP1[]={ 
  22          /*--  一幅图像 KISS- 正向取模，字节正序*/ 
  23          /*--  宽度x高度=128x64  --*/ 
  24          
  25          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00, 
  26          0xFF,0xFF,0xFF,0x9F,0x00,0x00,0x0F,0x0E,0x00,0x00,0x00,0x00,0x19,0xFF,0xFF,0xFF, 
  27          0x00,0x00,0x00,0x00,0x00,0x00,0x1F,0xBF,0x80,0x00,0x00,0x00,0x00,0x00,0x00,0x00, 
  28          0x00,0x00,0x00,0x00,0x00,0x00,0x1F,0xFD,0x80,0x00,0x00,0x00,0x00,0x00,0x00,0x00, 
  29          0xFF,0xFF,0xF3,0xE0,0x00,0x00,0x1F,0xFD,0x80,0x00,0x00,0x00,0x00,0x3F,0xFF,0xFF, 
  30          0x00,0x00,0x00,0x00,0x00,0x00,0x0F,0xFA,0x00,0x00,0x00,0x00,0x01,0x80,0x00,0x00, 
  31          0x00,0x00,0x00,0x00,0x00,0x00,0x07,0xF4,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00, 
  32          0xFF,0xFF,0xF0,0x00,0x00,0x00,0x03,0xF8,0x01,0xFF,0xFF,0xE0,0x00,0x07,0xFF,0xFF, 
  33          0x00,0x00,0x00,0x0F,0xFF,0xFC,0x00,0xF0,0x3F,0xFF,0xFF,0xFE,0x00,0x30,0x00,0x00, 
  34          0x00,0x00,0x00,0x7F,0xFF,0xFF,0x80,0x41,0xFF,0xFF,0xFF,0xFF,0xC0,0x00,0x00,0x00, 
  35          0xFF,0xFF,0x01,0xFF,0xFF,0xFF,0xF0,0x02,0x7F,0xFF,0xFF,0xFF,0xE0,0x03,0xFF,0xFF, 
  36          0x00,0x00,0x03,0xFF,0xFF,0xFF,0xF8,0x04,0x3F,0xFF,0xFF,0xFF,0xF0,0x00,0x00,0x00, 
  37          0x00,0x00,0x1F,0xFF,0xFF,0xFF,0xFC,0x08,0x73,0xFF,0xFF,0xFF,0xF8,0x00,0x00,0x00, 
  38          0xFF,0xE4,0x3F,0x7F,0xFF,0xFF,0xFF,0x30,0x2F,0xFF,0xFF,0xFF,0xFE,0x00,0x7F,0xFF, 
  39          0x00,0x00,0xFE,0x9F,0xFF,0xFF,0xFF,0xB0,0x1D,0xFF,0xFF,0xFF,0x3F,0x00,0x00,0x00, 
  40          0x00,0x00,0xFF,0x7F,0xFF,0xFF,0xFF,0xC2,0x23,0x3F,0xFF,0xFE,0x1F,0x80,0x00,0x00,
  41          /*****************************************************************************/ 
  42          0xFF,0xE1,0xFF,0xFF,0xFF,0xFF,0xFC,0xC5,0x92,0xFF,0xB7,0xB8,0xC9,0x80,0x7F,0xFF, 
  43          0x00,0x03,0xFF,0xFF,0xFF,0xFF,0xFC,0x4F,0xEF,0x3F,0xC8,0x1A,0x20,0xC0,0x00,0x00, 
  44          0x00,0x03,0xFF,0xFF,0xFF,0xFF,0xF8,0x7F,0xFF,0xFF,0x75,0x86,0xF6,0xC0,0x00,0x00, 
  45          0xFF,0x03,0xEF,0x9F,0xFB,0xFF,0xF8,0x7F,0xFF,0xFF,0xFB,0xDF,0xFE,0xC0,0x7F,0xFF, 
  46          0x00,0x07,0xDE,0x7F,0xC7,0xFF,0xF0,0x7E,0x7F,0xFF,0xFF,0xFF,0xFF,0xC0,0x00,0x00, 
  47          0x00,0x07,0x1C,0xF7,0x9F,0xDF,0xF0,0x7E,0x7F,0xFF,0xFF,0xFF,0xFF,0xC0,0x00,0x00, 
  48          0xFC,0x07,0x00,0x8C,0x1F,0xBF,0xE7,0x3C,0x3F,0xFF,0xFF,0xFF,0xFF,0xC0,0x7F,0xFF, 
  49          0x00,0x07,0x00,0x08,0x1C,0x3F,0x88,0x3C,0x7F,0xFF,0xFF,0xFF,0xFF,0xC0,0x00,0x00, 
  50          0x00,0x06,0x0C,0x08,0x98,0x7F,0x80,0x0D,0x9F,0xFF,0xFF,0xFF,0xFF,0xC0,0x00,0x00, 
  51          0xFC,0x06,0x1C,0xE3,0x99,0xFF,0x00,0x0C,0x0F,0xFF,0xFF,0xFF,0xFF,0xC0,0x5F,0xFF, 
  52          0x00,0x06,0xF1,0xE3,0x83,0xFE,0x00,0x08,0x03,0xDF,0xFF,0xFF,0xFF,0xC0,0x00,0x00, 
  53          0x00,0x06,0xF1,0xF7,0xC7,0xFE,0x00,0x08,0x01,0xCF,0xFF,0xFF,0xFF,0xC0,0x00,0x00, 
  54          0xFC,0x06,0xF3,0xF7,0xC7,0xFC,0x03,0x08,0x00,0x01,0xFF,0xFF,0xFF,0xC0,0xBF,0xFF, 
  55          0x00,0x07,0xF3,0xFF,0xE7,0xF0,0x03,0x09,0x80,0x00,0xFF,0xFF,0xFF,0xC0,0x00,0x00, 
C51 COMPILER V8.05a   CHENGXU                                                              04/17/2010 20:48:12 PAGE 2   

  56          0x00,0x07,0xFF,0xFF,0xFF,0xE0,0x03,0x09,0x80,0x00,0x3F,0xFF,0xFF,0x80,0x00,0x00, 
  57          0xFC,0x07,0xFF,0xFF,0xFF,0xC0,0x03,0x09,0x80,0x00,0x0F,0xFF,0xFF,0x83,0xFF,0xFF,
  58          /*****************************************************************************/ 
  59          0x00,0x07,0xFF,0xE0,0xFE,0x00,0x03,0x09,0x80,0x00,0x07,0xFF,0xFF,0x80,0x00,0x00, 
  60          0x00,0x07,0xFF,0x80,0x7C,0x00,0x07,0xB1,0x80,0x00,0x07,0x83,0xFF,0x00,0x00,0x00, 
  61          0xFF,0x07,0xFF,0x0C,0x00,0x00,0x7F,0xB3,0xC0,0x00,0x06,0x01,0xFE,0x03,0xFF,0xFF, 
  62          0x00,0x07,0xFF,0x03,0x00,0x00,0x1F,0x43,0xFC,0x00,0x06,0x38,0xFE,0x00,0x00,0x00, 
  63          0x00,0x07,0xFF,0x03,0x00,0x00,0x00,0x81,0xF0,0x00,0x04,0x40,0xF8,0x00,0x00,0x00, 
  64          0xFC,0x87,0xFF,0x00,0x00,0x00,0x00,0x80,0x00,0x00,0x04,0x40,0xF0,0x07,0xFF,0xFF, 
  65          0x00,0x07,0xFF,0x80,0x00,0x2C,0x00,0x80,0x00,0x00,0x00,0x00,0xE0,0x00,0x00,0x00, 
  66          0x00,0x07,0xFF,0x80,0x00,0x52,0x00,0x40,0x00,0x00,0x00,0x01,0xE0,0x00,0x00,0x00, 
  67          0xFF,0x83,0xFF,0xF0,0x80,0x2C,0x00,0x40,0x00,0x00,0x00,0x01,0xC0,0x7F,0xFF,0xFF, 
  68          0x00,0x03,0xFF,0xFF,0x80,0x00,0x00,0x30,0x00,0x00,0x01,0x86,0x00,0x00,0x00,0x00, 
  69          0x00,0x03,0xFF,0xFF,0x80,0x00,0x00,0x38,0x00,0x00,0x01,0xF8,0x00,0x00,0x00,0x00, 
  70          0xFF,0xA3,0xFF,0xFF,0x80,0x00,0x00,0x44,0x00,0x00,0x01,0xFF,0x00,0x7F,0xFF,0xFF, 
  71          0x00,0x03,0xFF,0xFF,0x80,0x00,0x03,0x82,0x00,0x00,0x01,0xC0,0xC0,0x00,0x00,0x00, 
  72          0x00,0x03,0xFF,0xFF,0x80,0x00,0x1C,0x01,0xC0,0x00,0x00,0x78,0xC0,0x00,0x00,0x00, 
  73          0xFF,0x81,0xFF,0xFF,0xC0,0x3F,0xE0,0x00,0x3C,0x00,0x07,0x80,0x20,0x7F,0xFF,0xFF, 
  74          0x00,0x01,0xFF,0xFF,0xE0,0x40,0x00,0x00,0x03,0xFE,0x78,0x00,0x20,0x00,0x00,0x00,
  75          /*****************************************************************************/
  76          0x00,0x01,0xFF,0xFF,0xF8,0x40,0x00,0x00,0x00,0x21,0x80,0x00,0x10,0x00,0x00,0x00, 
  77          0xFF,0xC1,0xFF,0xFF,0xFC,0x40,0x00,0x00,0x00,0x2E,0x00,0x00,0x10,0x4F,0xFF,0xFF, 
  78          0x00,0x01,0xFF,0xFF,0xFE,0x20,0x00,0x00,0x00,0x30,0x00,0x00,0x30,0x00,0x00,0x00, 
  79          0x00,0x00,0xFF,0xFF,0xFF,0xA0,0x00,0x00,0x00,0xC0,0x00,0x01,0xF8,0x00,0x00,0x00, 
  80          0xFF,0xE0,0xFF,0xFF,0xFB,0xE0,0x00,0x00,0x00,0xC0,0x00,0x03,0xFE,0x07,0xFF,0xFF, 
  81          0x00,0x00,0xFF,0xFF,0xFD,0xE0,0x00,0x00,0x00,0xC0,0x00,0x1F,0xFF,0x00,0x00,0x00, 
  82          0x00,0x00,0xFF,0xFF,0xFE,0x70,0x00,0x00,0x01,0xE0,0x00,0x3F,0xFF,0x80,0x00,0x00, 
  83          0xFF,0xC0,0xFF,0xFF,0xFF,0xB0,0x00,0x00,0x01,0xE0,0x00,0x7F,0xFF,0xC0,0x3F,0xFF, 
  84          0x00,0x00,0xFF,0xFF,0xFF,0xDC,0x00,0x00,0x03,0xF7,0x81,0xFF,0xFF,0xF0,0x00,0x00, 
  85          0x00,0x01,0xFF,0x80,0x7F,0xDC,0x00,0x00,0x0F,0xFF,0xC3,0xFF,0xFF,0xF8,0x00,0x00, 
  86          0xFF,0x01,0xFF,0x00,0x1F,0xEE,0x00,0x00,0x13,0xFF,0xF7,0xFF,0xFF,0xFC,0x07,0xFF, 
  87          0x00,0x01,0xFE,0x00,0x07,0xEF,0x00,0x00,0x1F,0xFF,0xFF,0xFF,0xFF,0xFF,0x00,0x00, 
  88          0x00,0x01,0xFC,0x00,0x03,0xF3,0x00,0x00,0x13,0xFF,0xBF,0xFF,0xFF,0xFF,0x80,0x00, 
  89          0xFF,0x01,0xFC,0x00,0x01,0xF3,0x80,0x00,0x1F,0xFF,0xBF,0xFF,0xFF,0xFF,0x83,0xFF, 
  90          0x00,0x01,0xF0,0x00,0x01,0xFD,0x80,0x00,0x0F,0xFF,0x7F,0xFF,0xFF,0xFF,0xC0,0x00, 
  91          0x00,0x03,0xF0,0x00,0x00,0x72,0xE0,0x00,0x03,0xFE,0xFF,0xFF,0xFF,0xFF,0xC0,0x00 
  92          
  93          };   
  94          
  95          unsigned char code BMP[]={ 
  96          //一幅图像 - 正向取模，字节正序 
  97          /*--  宽度x高度=128x64  --*/ 
  98          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00, 
  99          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00, 
 100          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00, 
 101          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x20,0x00,0x00,0x00,0x00, 
 102          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x04,0x00,0x00,0x20,0x00,0x00,0x00,0x00, 
 103          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x03,0x00,0x00,0x40,0x08,0x00,0x00,0x00, 
 104          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x80,0x00,0x40,0x08,0x00,0x00,0x00, 
 105          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x60,0x00,0x40,0x38,0x00,0x00,0x00, 
 106          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x10,0x00,0x00,0x60,0x00,0x06,0x00, 
 107          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x08,0x00,0x01,0x80,0x00,0x38,0x00, 
 108          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x06,0x03,0xC0,0x00,0x03,0xC0,0x00, 
 109          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x01,0x1C,0x38,0x00,0x1C,0x00,0x00, 
 110          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x20,0x04,0x00,0xE0,0x00,0x00, 
 111          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x40,0x02,0x03,0x00,0x00,0x00, 
 112          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x0E,0x00,0x00,0x80,0x01,0x00,0x00,0x00,0x00, 
 113          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x01,0xF0,0x01,0x00,0x00,0x80,0x00,0x00,0x00,
 114          /*****************************************************************************/ 
 115          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x0F,0x01,0x00,0x00,0x80,0x00,0x00,0x00, 
 116          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xE1,0x00,0x00,0x80,0x00,0x00,0x00, 
 117          0x00,0x00,0x0F,0x80,0x00,0x00,0x00,0x00,0x00,0x02,0x00,0x00,0x40,0x00,0x00,0x00, 
C51 COMPILER V8.05a   CHENGXU                                                              04/17/2010 20:48:12 PAGE 3   

 118          0x00,0x00,0x18,0xC0,0x00,0x00,0x00,0x00,0x00,0x02,0x00,0x00,0x40,0x00,0x00,0x00, 
 119          0x00,0x00,0x10,0x40,0x00,0x00,0x00,0x00,0x00,0x02,0x00,0x00,0x41,0xC0,0x00,0x00, 
 120          0x00,0x00,0x30,0x60,0x3F,0xC0,0x00,0x00,0x00,0x02,0x00,0x00,0x40,0x3E,0x00,0x00, 
 121          0x00,0x00,0x20,0x23,0xC0,0x60,0x00,0x00,0x00,0x61,0x00,0x00,0x80,0x01,0xC0,0x00, 
 122          0x00,0x00,0x40,0x3C,0x00,0x18,0x00,0xC0,0x07,0xC1,0x00,0x00,0x80,0x00,0x00,0x00, 
 123          0x00,0x00,0x40,0x18,0x00,0x04,0x01,0xA0,0x1C,0x01,0x00,0x00,0x80,0x00,0x00,0x00, 
 124          0x00,0x00,0x40,0x08,0x00,0x06,0x02,0x1C,0x00,0x00,0x80,0x01,0x00,0x00,0x00,0x00, 
 125          0x00,0x00,0xC0,0x08,0x00,0x01,0x8C,0x03,0x80,0x00,0x40,0x02,0x00,0x00,0x00,0x00, 
 126          0x00,0x00,0x80,0x0C,0x00,0x00,0x58,0x00,0x60,0x06,0x20,0x04,0x20,0x00,0x00,0x00, 
 127          0x00,0x01,0x00,0x04,0x00,0x00,0x20,0x00,0x10,0x1C,0x1C,0x38,0x18,0x00,0x00,0x00, 
 128          0x00,0x01,0x00,0x06,0x00,0x00,0x30,0x00,0x08,0x30,0x03,0xC0,0x07,0x00,0x00,0x00, 
 129          0x00,0x01,0x00,0x02,0x00,0x00,0x18,0x00,0x04,0x60,0x00,0x00,0x01,0x80,0x00,0x00, 
 130          0x00,0x02,0x00,0x00,0x00,0x00,0x0C,0x00,0x03,0x00,0x00,0x00,0x00,0x40,0x00,0x00,
 131          /*****************************************************************************/
 132          0x00,0x02,0x00,0x00,0x00,0x00,0x04,0x00,0x00,0x80,0x02,0x08,0x00,0x30,0x00,0x00, 
 133          0x00,0x04,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x60,0x02,0x08,0x00,0x18,0x00,0x00, 
 134          0x00,0x0C,0x00,0x00,0x7F,0xFC,0x00,0x00,0x00,0x20,0x02,0x04,0x00,0x00,0x00,0x00, 
 135          0x00,0x0C,0x00,0x00,0x00,0x02,0x00,0x00,0x00,0x18,0x02,0x04,0x00,0x00,0x00,0x00, 
 136          0x00,0x18,0x00,0x00,0x00,0x02,0x00,0x00,0x00,0x07,0xF2,0x02,0x00,0x00,0x00,0x00, 
 137          0x00,0x30,0x00,0x00,0x0F,0xFC,0x00,0x00,0x00,0x00,0x02,0x02,0x00,0x00,0x00,0x00, 
 138          0x00,0x60,0x00,0x00,0x10,0x00,0x00,0x00,0x00,0x00,0x00,0x01,0x00,0x00,0x00,0x00, 
 139          0x00,0x40,0x00,0x00,0x10,0x00,0x00,0x00,0x00,0x00,0x00,0x01,0x00,0x00,0x00,0x00, 
 140          0x01,0x80,0x00,0x00,0x0F,0xFF,0xFF,0xFF,0xFF,0xE0,0x00,0x00,0x80,0x00,0x00,0x00, 
 141          0x01,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00, 
 142          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00, 
 143          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00, 
 144          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00, 
 145          0x00,0x00,0x00,0x00,0x00,0x00,0x0F,0x1C,0x00,0x00,0x00,0x00,0x00,0x00,0xC0,0x00, 
 146          0x00,0x00,0x00,0x00,0x00,0x00,0x19,0x8C,0x00,0x00,0x00,0x00,0x00,0x00,0xC0,0x00, 
 147          0x00,0x00,0x00,0x00,0x00,0x00,0x30,0xCC,0x00,0x00,0x00,0x00,0x00,0x00,0xC0,0x00,
 148          
 149          /*
 150           "太",     "阳",    "出",      "来",    "喜",     "洋",     "洋",     "喽",*/
 151           0x01,0x00,0x00,0x00,0x01,0x00,0x01,0x00,0x01,0x00,0x22,0x10,0x22,0x10,0x00,0x48,
 152           0x01,0x00,0x7D,0xFC,0x01,0x00,0x01,0x00,0x7F,0xFC,0x11,0x10,0x11,0x10,0x02,0x4C,
 153           0x01,0x00,0x45,0x04,0x21,0x04,0x3F,0xFC,0x01,0x00,0x11,0x20,0x11,0x20,0xF1,0x50,
 154           0x01,0x00,0x49,0x04,0x21,0x04,0x01,0x00,0x3F,0xF8,0x07,0xFC,0x07,0xFC,0x97,0xFE,
 155           0x7F,0xFE,0x49,0x04,0x21,0x04,0x09,0x30,0x00,0x00,0x80,0x40,0x80,0x40,0x90,0xE0,
 156           0x01,0x00,0x51,0x04,0x21,0x04,0x05,0x20,0x1F,0xF0,0x50,0x40,0x50,0x40,0x91,0x50,
 157           0x01,0x00,0x49,0xFC,0x3F,0xFC,0x03,0x40,0x10,0x10,0x57,0xFC,0x57,0xFC,0x92,0x4E,
 158           0x01,0x00,0x45,0x04,0x21,0x04,0x7F,0xFE,0x1F,0xF0,0x10,0x40,0x10,0x40,0x9D,0x44,
 159           0x02,0x80,0x45,0x04,0x01,0x00,0x01,0x80,0x04,0x40,0x20,0x40,0x20,0x40,0x91,0x00,
 160           0x02,0x40,0x45,0x04,0x21,0x04,0x03,0x40,0xFF,0xFE,0x2F,0xFE,0x2F,0xFE,0xF7,0xFC,
 161           0x04,0x20,0x69,0x04,0x21,0x04,0x05,0x20,0x00,0x00,0xE0,0x40,0xE0,0x40,0x92,0x10,
 162           0x05,0x10,0x51,0x04,0x21,0x04,0x09,0x18,0x1F,0xF0,0x20,0x40,0x20,0x40,0x83,0x20,
 163           0x08,0x98,0x41,0xFC,0x21,0x04,0x31,0x0E,0x10,0x10,0x20,0x40,0x20,0x40,0x00,0xE0,
 164           0x10,0xCC,0x41,0x04,0x3F,0xFC,0xC1,0x04,0x10,0x10,0x20,0x40,0x20,0x40,0x01,0x18,
 165           0x20,0x86,0x40,0x00,0x01,0x00,0x01,0x00,0x1F,0xF0,0x20,0x40,0x20,0x40,0x02,0x0C,
 166           0x40,0x04,0x40,0x00,0x00,0x00,0x01,0x00,0x00,0x00,0x20,0x40,0x20,0x40,0x04,0x08
 167            }; 
 168          
 169          /*------------------检查忙位-----------------------------*/ 
 170          void chk_busy() 
 171          {  RS=0; 
 172   1         RW=1; 
 173   1         E=1; 
 174   1         Lcd_Bus=0xff; 
 175   1         while((Lcd_Bus&0x80)==0x80); 
 176   1         E=0; 
 177   1      } 
 178          /*------------------延时子程序-----------------------------*/ 
 179          void delay(unsigned int t) 
C51 COMPILER V8.05a   CHENGXU                                                              04/17/2010 20:48:12 PAGE 4   

 180          {  unsigned int i,j; 
 181   1         for(i=0;i<t;i++) 
 182   1            for(j=0;j<10;j++); 
 183   1      } 
 184          /*------------------写命令到LCD------------------------------*/ 
 185          void write_com(unsigned char cmdcode) 
 186          { 
 187   1      chk_busy(); 
 188   1      RS=0; 
 189   1      RW=0; 
 190   1      E=1; 
 191   1      Lcd_Bus=cmdcode; 
 192   1      delay(5);////////////////////在数据写入的时候加入适当的延时 
 193   1      E=0; 
 194   1      delay(5); 
 195   1      } 
 196          /*-------------------写数据到LCD----------------------------*/ 
 197          void write_data(unsigned char Dispdata) 
 198          { 
 199   1      chk_busy(); 
 200   1      RS=1; 
 201   1      RW=0; 
 202   1      E=1; 
 203   1      Lcd_Bus=Dispdata; 
 204   1      delay(5);///////////////////在数据写入的时候加入适当的延时 
 205   1      E=0; 
 206   1      delay(5); 
 207   1      } 
 208          /*------------------初始化LCD屏--------------------------*/ 
 209          void lcdreset() 
 210          {  delay(2000); 
 211   1         write_com(0x30); 
 212   1         delay(10);             //选择基本指令集 
 213   1         write_com(0x30);       //选择8bit数据流 
 214   1         delay(5); 
 215   1         write_com(0x0c);       //开显示(无游标、不反白) 
 216   1         delay(10); 
 217   1         write_com(0x01);       //清除显示，并且设定地址指针为00H 
 218   1         delay(500); 
 219   1         write_com(0x06);       //指定在资料的读取及写入时，设定游标的移动方向及指定显示的移位 
 220   1         delay(0); 
 221   1      } 
 222          /*------------------自定义一个字符代码(一个星星和月亮)--------------------------*/ 
 223          void CGRAM() 
 224          { int i; 
 225   1           write_com(0x30);   
 226   1           write_com(0x40); 
 227   1           for(i=0;i<16;i++) 
 228   1           {write_data(zk[i*2]); 
 229   2            write_data(zk[i*2+1]); 
 230   2            } 
 231   1      }       
 232          /*------------------显示字符串--------------------------*/ 
 233          void hzkdis(unsigned char code *s) 
 234          {  while(*s>0) 
 235   1         {  write_data(*s); 
 236   2            s++; 
 237   2            delay(50); 
 238   2         } 
 239   1      } 
 240          /*------------------首屏显示--------------------------*/ 
 241          void ceshi() 
C51 COMPILER V8.05a   CHENGXU                                                              04/17/2010 20:48:12 PAGE 5   

 242          {write_com(0x01);//清除显示，并且设定地址指针为00H 
 243   1      delay(5); 
 244   1      
 245   1      write_com(0x80);//第一行（如果是地址是：80H，即LCD的第一行的第一个位置显示） 
 246   1      hzkdis("ourhc@163.com"); 
 247   1      
 248   1      write_com(0x90);//第二行（如果是地址是：90H，即LCD的第二行的第一个位置显示） 
 249   1      hzkdis("汇诚科技电子"); 
 250   1      
 251   1      write_com(0x88);//第三行（如果是地址是：88H，即LCD的第二行的第一个位置显示） 
 252   1      hzkdis("QQ:115451619"); 
 253   1      
 254   1      write_com(0x98);//第四行（如果是地址是：98H，即LCD的第二行的第一个位置显示） 
 255   1      hzkdis("液晶显示测试程序"); 
 256   1      
 257   1      
 258   1      } 
 259          /*------------------显示图片------------------------*/ 
 260          void Disp_Img(unsigned char code *img) 
 261          {  unsigned int j=0; 
 262   1         unsigned char x,y,i; 
 263   1             for(i=0;i<9;i+=8) 
 264   1             for(y=0;y<32;y++)/*原来 为 y<26 ,上下两个半屏不能正常对接显示，导致显示的图片中间有
 265   1      
 266   1      空隙*/ 
 267   1               for(x=0;x<8;x++) 
 268   1               {  write_com(0x36);//功能设置---8BIT控制界面，扩充指令集 
 269   2                  write_com(y+0x80);        //行地址 
 270   2                  write_com(x+0x80+i);     //列地址 
 271   2                  write_com(0x30); 
 272   2                  write_data(img[j++]); 
 273   2                  write_data(img[j++]); 
 274   2               }   
 275   1                 
 276   1      } 
 277          /*------------------清整个GDRAM空间----------------------------*/ 
 278          void clrgdram() 
 279          { unsigned char x,y; 
 280   1              for(y=0;y<64;y++) 
 281   1               for(x=0;x<16;x++) 
 282   1               {  write_com(0x34); 
 283   2                  write_com(y+0x80);        //行地址 
 284   2                  write_com(x+0x80);     //列地址 
 285   2                  write_com(0x30); 
 286   2                  write_data(0x00); 
 287   2                  write_data(0x00); 
 288   2                                     } 
 289   1         } 
 290          /*------------------整屏写入数据:全亮，或者竖条-----------------------------*/ 
 291          void lcdfill(unsigned char disdata) 
 292          { unsigned char x,y; 
 293   1              for(y=0;y<32;y++) 
 294   1               for(x=0;x<16;x++) 
 295   1               {  write_com(0x36); 
 296   2                  write_com(y+0x80);        //行地址 
 297   2                  write_com(x+0x80);     //列地址 
 298   2                  write_com(0x30); 
 299   2                  write_data(disdata); 
 300   2                  write_data(disdata); 
 301   2                  } 
 302   1         write_com(0x34);                             
 303   1         write_com(0x36); 
C51 COMPILER V8.05a   CHENGXU                                                              04/17/2010 20:48:12 PAGE 6   

 304   1         } 
 305          /*------------------显示横-----------------------------*/ 
 306          void Disp_H_Line() 
 307          {  unsigned char x,y; 
 308   1         unsigned char k=0x00;   
 309   1             for(y=0;y<32;y++) 
 310   1               { k=~k; 
 311   2                 for(x=0;x<16;x++) 
 312   2               {  write_com(0x36); 
 313   3                  write_com(y+0x80);      //行地址 
 314   3                  write_com(x+0x80);     //列地址 
 315   3                  write_com(0x30); 
 316   3                  write_data(k); 
 317   3                  write_data(k); 
 318   3                 }; 
 319   2               } 
 320   1           write_com(0x34);                           
 321   1         write_com(0x36); 
 322   1      } 
 323          /*------------------显示边框-------------------------------*/ 
 324          void Frame() 
 325          {unsigned char x,y; 
 326   1                lcdfill(0x00); 
 327   1              for(x=0;x<9;x+=8) 
 328   1                for(y=0;y<32;y++) 
 329   1                 { write_com(0x36); 
 330   2                  write_com(y+0x80);      //行地址 
 331   2                  write_com(x+0x80);        //列地址 
 332   2                  write_com(0x30); 
 333   2                  write_data(0x80); 
 334   2                  write_data(0x00); 
 335   2                 
 336   2                  write_com(0x36); 
 337   2                  write_com(y+0x80);      //行地址 
 338   2                  write_com(x+0x87);        //列地址 
 339   2                  write_com(0x30); 
 340   2                  write_data(0x00); 
 341   2                  write_data(0x01); 
 342   2                   
 343   2                  } 
 344   1            for(y=0;y<2;y++) 
 345   1               for(x=0;x<8;x++) 
 346   1                 {write_com(0x36); 
 347   2                  write_com(y*31+0x80);      //行地址 
 348   2                  write_com(x+0x80+8*y);        //列地址 
 349   2                  write_com(0x30); 
 350   2                  write_data(0xff); 
 351   2                  write_data(0xff); 
 352   2                 } 
 353   1               write_com(0x34); 
 354   1               write_com(0x36); 
 355   1                          } 
 356          
 357          /*------------------在第7列的位置加入两条竖线--------------------------*/ 
 358          void shuxian() 
 359          { unsigned char x,y; 
 360   1           
 361   1          for(x=0;x<9;x+=8) 
 362   1             for(y=0;y<32;y++) 
 363   1                { write_com(0x36); 
 364   2                  write_com(y+0x80);    //行地址 
 365   2                  write_com(x+0x86);     //列地址 
C51 COMPILER V8.05a   CHENGXU                                                              04/17/2010 20:48:12 PAGE 7   

 366   2                  write_com(0x30); 
 367   2                  write_data(0x00); 
 368   2                  write_data(0x14); 
 369   2                }; 
 370   1      }     
 371                     
 372          /*------------------清屏命令--------------------------*/   
 373          void clrscreen() 
 374          { 
 375   1         write_com(0x01); 
 376   1         delay(10); 
 377   1         } 
 378             
 379          /*------------------唐诗《静夜思》--------------------------*/ 
 380          void gushi_display() 
 381          {  write_com(0x30); 
 382   1         clrscreen();   
 383   1         write_com(0x80+FIRST_ADDR); 
 384   1         hzkdis("白日依山尽，"); 
 385   1         write_com(0x90+FIRST_ADDR); 
 386   1         hzkdis("黄河入海流。"); 
 387   1         write_com(0x88+FIRST_ADDR); 
 388   1         hzkdis("欲穷千里目，"); 
 389   1         write_com(0x98+FIRST_ADDR); 
 390   1         hzkdis("更上一层楼。"); 
 391   1         write_com(0xb3+FIRST_ADDR); 
 392   1         hzkdis("登鹳雀楼"); 
 393   1         write_com(0xaa+FIRST_ADDR); 
 394   1         hzkdis("( 唐 )王之焕"); 
 395   1      } 
 396          
 397          main() 
 398          {  unsigned char i; 
 399   1         while(1) 
 400   1         { 
 401   2      // PSB=0;
 402   2       delay(300);
 403   2      // PSB=1;        
 404   2           RW=0; 
 405   2            lcdreset();                    //初始化LCD屏 
 406   2            CGRAM();                         
 407   2            ceshi();                      //显示测试字样 
 408   2           delay(2000); 
 409   2           
 410   2            clrgdram(); 
 411   2           clrscreen();                  //清屏 
 412   2           Disp_Img(BMP);               //调入一幅图画 
 413   2            delay(30000); 
 414   2      
 415   2           Disp_Img(BMP1);               //调入一幅图画 
 416   2            delay(20000); 
 417   2                         
 418   2           lcdfill(0xff);               //显示全开 
 419   2            delay(2000);             
 420   2           
 421   2           Disp_H_Line();                //显示横条 
 422   2             delay(2000); 
 423   2      
 424   2             lcdfill(0xaa);               //显示竖条 
 425   2            delay(2000); 
 426   2           
 427   2            Frame();                     //显示边框 
C51 COMPILER V8.05a   CHENGXU                                                              04/17/2010 20:48:12 PAGE 8   

 428   2            delay(2000); 
 429   2             
 430   2           gushi_display();             //显示唐诗 
 431   2            clrgdram(); 
 432   2                 
 433   2           write_com(0x87);          //调用自定义的CGRAM的代码 
 434   2           write_data(0x00); 
 435   2           write_data(0x00); 
 436   2           delay(400); 
 437   2             
 438   2            shuxian();              //加入两条竖线 
 439   2            delay(8000); 
 440   2            write_com(0x30); 
 441   2             delay(2000); 
 442   2                   
 443   2            gushi_display(); 
 444   2            delay(6000); 
 445   2            for(i=0;i<8;i++)        //字符循环左移 
 446   2           {write_com(0x18);   
 447   3              delay(2000);} 
 448   2                 
 449   2             gushi_display(); 
 450   2            delay(6000);   
 451   2           write_com(0x36);         
 452   2            write_com(0x04);          //第一行反白显示 
 453   2            delay(6000); 
 454   2            write_com(0x04);          //第一行恢复正常 
 455   2            delay(6000); 
 456   2             write_com(0x05);          //第二行反白显示 
 457   2            delay(6000); 
 458   2            write_com(0x05);          //第二行恢复正常 
 459   2            delay(6000); 
 460   2                 
 461   2            write_com(0x03);         //垂直滚动屏幕的内容 
 462   2            write_com(0x60); 
 463   2            delay(6000); 
 464   2         } 
 465   1      } 


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =   1109    ----
   CONSTANT SIZE    =   2211    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----      17
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
