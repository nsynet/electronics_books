C51 COMPILER V8.05a   CHENGXU                                                              07/06/2009 16:04:16 PAGE 1   


C51 COMPILER V8.05a, COMPILATION OF MODULE CHENGXU
OBJECT MODULE PLACED IN chengxu.OBJ
COMPILER INVOKED BY: C:\Keil\C51\BIN\C51.EXE chengxu.c BROWSE DEBUG OBJECTEXTEND

line level    source

   1          /********************************************************************
   2                                      汇诚科技
   3                                                    http://www.ourhc.cn
   4          *********************************************************************/
   5          #include<reg52.h>              //库文件
   6          #define uchar unsigned char//宏定义无符号字符型
   7          #define uint unsigned int  //宏定义无符号整型
   8          /********************************************************************
   9                                      初始定义
  10          *********************************************************************/
  11          uchar count;   //按键计数,每按一下,count 加1
  12          uchar a,b;         //定义字符型变量
  13          uchar temp;    //定义字符型变量
  14          sbit BY1=P2^1; //定义按键的输入端（为单片机P2口的P2.1按键）
  15          /********************************************************************
  16                                      延时函数
  17          *********************************************************************/
  18          void delay10ms(void) //延时程序
  19          {
  20   1      uchar i,j;
  21   1      for(i=20;i>0;i--)
  22   1      for(j=248;j>0;j--);
  23   1      }
  24          /********************************************************************
  25                                     按键判断函数
  26          *********************************************************************/
  27          void key() //按键判断程序
  28          {
  29   1              if(BY1==0) //判断是否按下键盘
  30   1              {
  31   2                      delay10ms(); //延时,软件去干扰
  32   2                      if(BY1==0) //确认按键按下
  33   2                      {
  34   3                              count++; //按键计数加1
  35   3                              if(count==8) //计8次重新计数
  36   3                              { 
  37   4                                      count=0;//将count 清零
  38   4                              } 
  39   3                      }
  40   2              while(BY1==0);//按键锁定,每按一次count 只加1.
  41   2              }
  42   1      }
  43          /********************************************************************
  44                                      主函数
  45          *********************************************************************/
  46          void main()
  47          {
  48   1              temp=0xfe; //定义为11111110
  49   1              while(1)
  50   1              {
  51   2                      key(); //调用按键判断函数
  52   2                      a=temp<<count;//左移count位
  53   2                      b=temp>>(8-count);//右移8-count位
  54   2                      P0=a|b; //求值
  55   2              }
C51 COMPILER V8.05a   CHENGXU                                                              07/06/2009 16:04:16 PAGE 2   

  56   1      }
  57                  
  58          /********************************************************************
  59                                        结束
  60          *********************************************************************/


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =     78    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =      4    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
